<template>
  <div class="app-container">

    <!--筛选条件-->
    <div class="filter-container">
      <el-row>
        <el-col :span="20">
          <el-form :inline="true" :rules="rules">
            <el-form-item label="取水类型" prop="type">
              <el-select v-model="intakeType" clearable>
                <el-option v-for="item in intakeTypeOptions" :key="item.id" :label="item.value" :value="item.id" />
              </el-select>
            </el-form-item>
            <el-form-item label="月份" v-show="intakeType===1" prop="month">
              <el-date-picker v-model="listQuery.month" type="month" placeholder="选择月" value-format="yyyy-MM-dd HH:mm:ss">
              </el-date-picker>
            </el-form-item>
            <el-form-item label="年份" v-show="intakeType===3||intakeType===2" prop="month">
              <el-date-picker v-model="listQuery.year" type="year" placeholder="选择年" value-format="yyyy-MM-dd HH:mm:ss">
              </el-date-picker>
            </el-form-item>
            <el-form-item label="季度" v-show="intakeType===2&&listQuery.year" prop="month" value-format="yyyy-MM-dd HH:mm:ss">
              <el-select v-model="quarter" clearable>
                <el-option v-for="item in quarterOptions" :key="item.id" :label="item.value" :value="item.id" placeholder="选择季度" />
              </el-select>
            </el-form-item>
            <el-button type="primary" icon="el-icon-refresh" @click="handleReset">重置</el-button>
            <el-button type="primary" icon="el-icon-search" @click="handleFilter">{{ $t('table.search') }}</el-button>

          </el-form>
        </el-col>
        <el-col :span="4">
          <el-button type="primary" @click="handleDataManage">数据管理</el-button>
        </el-col>
      </el-row>
    </div>
    <div class="map-container">
      <svg height="768" xmlns="http://www.w3.org/2000/svg" width="1024" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 500 400">
        <g id="shapeWrap" transform="translate(-494,-367.02)">
          <!--底图边界-->
          <path fill-opacity="0.44" d="M320.5,11.5L316.4,15.6L312.3,19.7L313.8,25.3L316.4,30.4L320.5,34.5L322.6,41.2L322.6,48.4L324.1,53.5L326.2,59.2L327.7,63.8L327.7,66.9L324.1,67.4L320.5,67.4C320.5,67.4,318.5,69.4,317.4,70.4C316.4,71.5,316.4,69.4,316.4,71.5C316.4,73.5,315.4,76.1,313.8,77.6C312.3,79.2,310.3,79.7,310.3,79.7L310.3,81.2L308.5,86.1L307.7,88.9L307.7,91.5L305.6,97.6L302.1,106.3L298.5,115.1L294.9,121.7L294.9,126.3L302.1,132.5L307.7,134.5L307.7,140.7C307.7,140.7,307.7,149.9,307.7,151C307.7,152,307.7,161.2,307.7,161.2L310.3,172L313.8,178.1L312.3,184.8L307.7,191L304.4,192.7L302.1,198.1L294.9,208.4L290.8,215.1C290.8,215.1,280,224.3,279.2,224C278.5,223.8,265.6,231.5,265.6,231.5C265.6,231.5,253.3,236.1,252.3,237.1C251.3,238.1,244.6,241.2,244.6,241.2L244.6,246.9L247.2,257.6C247.2,257.6,254.9,263.8,254.4,264.8C253.8,265.8,257.9,272,257.9,272L255.9,275.6L247.2,282.7L244.6,288.4L244.6,293.5L244.6,298.6L241.5,298.6L237.7,293.8L237.7,292.2L224.1,292.2C224.1,292.2,220.9,294.2,221.5,292.2C222.2,290.3,223.1,277.1,223.1,277.1L228.2,270.4L231.5,267.1L228.2,261.2L218.2,267.6L209.2,270.4L195.4,275.6L195.4,282.7L201.5,284.3L208.2,288.4C208.2,288.4,201.3,291.2,200,291C198.7,290.7,195.6,293.8,195.6,293.8L193.8,295.6C193.8,295.6,197.4,298.6,198.7,297.9C200,297.1,203.6,297.1,204.6,298.6C205.6,300.2,208.2,302.2,208.2,302.2L204.6,306.3L193.8,312L191.3,310.4L190.8,298.6L186.7,295.6L180.5,293.8L175.1,293.8L166.2,298.6L154.4,302.2L146.2,306.3L135.9,306.3L122.6,303.8L114.9,308.9L114.9,300.2C114.9,300.2,114.9,302,112.6,297.9C110.3,293.8,96.4,272,96.4,272L86.7,272L70,255.3L70,241.2L66.2,238.6L66.2,255.3L76.9,267.6L81.3,272L79.6,273.6L68.7,270.4L71.9,273.6L76.9,281.7L82.8,285.6L76.9,288.4L66.2,277.1L60.5,268.9L46.7,258.1L42.3,253.8L40.5,247.4L38.5,241.2L35.9,234L30.5,228.6L27.7,224L26.5,217.2L27.2,208.4L26.5,202.2L21.3,195.3L16.9,191C16.9,191,14.4,188.9,13.6,189.2C12.8,189.4,12.8,189.4,12.8,189.4L10.9,192.7L7.4,198.1L4.6,198.1L5.6,191L4.6,186.5L0,178.1L0,175.6L4.6,173.5L12.3,172L13.6,168.4L20.5,168.4L26.5,163.1L32.8,154L34.6,149.7L42.3,144L49.7,140.7L51.8,140.7C51.8,140.7,59,139.2,60.5,139.2C62.1,139.2,68.7,144,68.7,144L76.9,145.1L82.8,136.9L84.1,130.4L92.7,120.1L102.8,116.9L100,110.4L98.5,101.2L104.1,88.9L106,76L112.6,74.3L123.6,77.6L130.3,77.6L137.9,79.7L142.6,82.7L143.7,76L146.2,70.4C146.2,70.4,148.2,67.4,150.3,67.4C152.3,67.4,156.4,66.9,156.4,66.9L161.8,66.9C161.8,66.9,161.8,66.9,161.8,63.5C161.8,60.2,161.8,55.8,161.8,55.8C161.8,55.8,163.1,53.5,163.8,53.5C165.1,53.5,171.8,51.5,171.8,51.5L175.9,48.4L180.5,48.4C180.5,48.4,180.5,42.2,180.5,39.2C180.5,36.1,179.6,33.1,179.6,33.1L183.5,33.1C183.5,33.1,186,31.3,187.7,32C189.4,32.6,204.6,34.3,204.6,33.1C204.6,32,194.9,28.4,197.4,27.9C200,27.4,206.2,25.3,206.2,25.3L212.3,23.8L221.5,19.7L229.9,21.9L237.7,23.8C237.7,23.8,243.1,23.8,244.6,19.7C246.2,15.6,247.7,16.6,248.7,15.6C249.7,14.5,254.4,11.5,254.4,11.5C254.4,11.5,254.4,14,260,11.5C265.6,8.9,269.5,8.6,270.3,9.4C271,10.2,282.1,9.4,282.1,9.4L284.1,7.4C284.1,7.4,291.3,3.8,294.9,3.8C298.5,3.8,302.1,2.7,302.1,2.7L310.3,1C310.3,1,313.8,-1.4,313.8,1.2C313.8,3.8,317.4,7.9,320.5,11.5z" stroke="#000000" id="shape1" fill="#00b050" transform="translate(495,368.02)" />

          <!-- <path fill-opacity="0" d="M0,3.8C0,1.7,1.7,0,3.8,0C5.9,0,7.6,1.7,7.6,3.8C7.6,5.9,5.9,7.6,3.8,7.6C1.7,7.6,0,5.9,0,3.8z" stroke="#000000" id="shape6" fill="#ffffff" stroke-opacity="0" transform="translate(617.92,468.51)" />
          <path fill-opacity="0" d="M0,3.8C0,1.7,1.7,0,3.8,0C5.9,0,7.6,1.7,7.6,3.8C7.6,5.9,5.9,7.6,3.8,7.6C1.7,7.6,0,5.9,0,3.8z" stroke="#000000" id="shape2" fill="#ffffff" stroke-opacity="0" transform="translate(702.61,494.54)" />
          <path fill-opacity="0" d="M0,3.8C0,1.7,1.7,0,3.8,0C5.9,0,7.6,1.7,7.6,3.8C7.6,5.9,5.9,7.6,3.8,7.6C1.7,7.6,0,5.9,0,3.8z" stroke="#000000" id="shape3" fill="#ffffff" stroke-opacity="0" transform="translate(672.35,595.05)" /> -->

          <!--河源-->
          <path d="M7,9.5C8,9.6,8.5,9.6,8.6,9.6C8.8,9.6,8.8,9.5,8.8,9.3L8.8,1.5L4.7,1.5C4.3,1.5,4,1.5,3.6,1.6L9.5,1.2L10.9,1.5L9.4,1.5L9.4,9.6C9.4,9.9,9.4,10.1,9.2,10.3C9.1,10.5,8.9,10.6,8.5,10.7C8.3,10.2,7.8,9.9,7,9.5zM4,8.2C4,7.6,4,6.7,4,5.6C4,4.4,4,3.6,4,3.1L6.4,3.5L7.5,3.6C7.1,5.8,7.1,7,7.1,7.5L4.6,7L4,8.2zM4.6,3.8L4.6,6.7L6.5,6.7L6.5,3.8L4.6,3.8zM3.4,2.3C2.5,5.4,2,7.1,1.9,7.5C1.8,7.9,1.7,8.3,1.8,8.9C1.8,9.5,1.8,9.9,1.8,10.1C1.8,10.3,1.6,10.3,1.3,10.2C.9,10.1,.8,9.7,1,9.1C1.2,8.4,1.2,8,1,7.9C.8,7.7,.5,7.5,0,7.4C.6,7.3,.9,7.3,1.1,7.3C1.2,7.3,1.4,7.1,1.5,6.9C1.7,6.6,2.3,5.1,3.4,2.3zM0,2.6C.9,3.1,1.4,3.5,1.5,3.9C1.5,4.2,1.5,4.4,1.3,4.6C1.1,4.8,.9,4.6,.8,4.1C.6,3.7,.3,3.2,0,2.6zM1,.3C1.8,.8,2.3,1.1,2.4,1.4C2.6,1.7,2.5,2,2.3,2.2C2.1,2.5,1.9,2.4,1.8,1.9C1.7,1.5,1.4,1,1,.3zM18.2,3L18.2,4.4L21.3,4.4L21.3,3L18.2,3zM18.2,4.7L18.2,6.1L21.3,6.1L21.3,4.7L18.2,4.7zM17.9,7.2C18.4,8,18,8.3,17.6,8.7C17.2,9.2,16.6,9.7,15.8,10.3C16.8,9,17.5,8,17.9,7.2zM20.5,7.5C21.7,8,22.3,8.5,22.5,8.8C22.7,9,22.7,9.4,22.5,9.8C22.4,10.2,22.2,10.1,21.9,9.6C21.7,9,21.3,8.3,20.5,7.5zM17.6,6.9C17.6,6.1,17.6,5.3,17.6,4.6C17.6,3.9,17.6,3.1,17.6,2.4L18.9,2.8C19.2,2,19.4,1.5,19.5,1.1L16.6,1.1C16.6,2.4,16.6,3.6,16.6,4.8C16.6,6,16.3,7.1,15.9,8C15.5,9,14.8,9.8,13.9,10.7C14.6,9.6,15.2,8.6,15.5,7.6C15.8,6.6,15.9,5.3,15.9,3.8C15.9,2.3,15.9,1.2,15.9,.4L21.5,.8L23,1.1L19.7,1.1C20.2,1.6,20,1.8,19.9,1.9C19.7,2,19.5,2.3,19.2,2.8L21.3,2.8L22.3,2.9C21.9,5.2,22,6.3,22,6.5L20.1,6.4L20.1,9.5C20.1,10.1,19.8,10.5,19.1,10.7C19.1,10.3,18.7,10,18,9.8C18.4,9.6,18.8,9.7,19,9.7C19.3,9.7,19.5,9.6,19.5,9.3L19.5,6.4L17.6,6.9zM15.6,1.7C14.6,5.1,14.1,7,14,7.4C13.9,7.8,13.9,8.3,13.9,8.9C13.8,9.4,13.8,9.8,13.9,10C13.9,10.3,13.7,10.3,13.3,10.1C12.9,10,12.8,9.6,13,9C13.2,8.4,13.2,8,13,7.8C12.8,7.6,12.5,7.5,12,7.4C12.6,7.2,13,7.3,13.1,7.2C13.2,7.2,13.4,7.1,13.6,6.8C13.7,6.6,14.3,4.8,15.6,1.7zM12,3C13.1,3.5,13.7,3.9,13.7,4.2C13.7,4.5,13.6,4.7,13.4,4.9C13.2,5.1,13.1,5,12.9,4.6C12.8,4.2,12.5,3.7,12,3zM13.1,.2C14,.6,14.5,.9,14.6,1.2C14.7,1.5,14.6,1.7,14.4,2C14.2,2.3,14,2.3,13.9,1.9C13.8,1.4,13.5,.9,13.1,.2zM28.5,0C29.2,.2,29.6,.4,29.8,.7C30,.9,30,1.1,29.9,1.4C29.8,1.6,29.7,1.8,29.6,1.8C29.4,1.9,29.3,1.7,29.2,1.3C29.1,1,28.9,.5,28.5,0zM25.9,9.7C25.9,8.5,25.9,7.4,25.9,6.2C25.9,5.1,25.9,4.1,25.9,3.4L29.2,3.8L29.2,2.2L25.9,2.2C25.5,2.2,25.1,2.3,24.8,2.3L33,1.9L34.8,2.2L29.8,2.2L29.8,3.8L32.4,3.8L33.6,3.9L33.2,8.4C33.2,9,32.8,9.4,32.1,9.7C32.1,9.2,31.7,8.9,30.8,8.6C31.3,8.5,31.8,8.5,32.1,8.5C32.4,8.5,32.6,8.3,32.5,8L32.5,4.1L29.8,4.1L29.8,8.9C29.8,9.4,29.8,10,29.9,10.5C29.1,10.1,29.2,9.3,29.2,8.6L29.2,4.1L26.6,4.1L25.9,9.7z" stroke="#000000" id="shape5" fill="#000000" transform="translate(727.48,460.93)" />
          <!--惠州-->
          <path d="M8.4,2.8C8.4,4.1,8.4,5,8.5,5.4L5.3,5.3L5.3,6.6L8,6.4C7.8,6.2,7.4,6,6.9,5.8C8,5.9,8.7,6.1,9,6.3C9.4,6.4,9.6,6.6,9.6,6.8C9.7,7,9.7,7.2,9.6,7.3C9.6,7.5,9.4,7.5,9.2,7.3C9,7.1,8.7,6.9,8.3,6.7C4.9,7,2.9,7.2,2.2,7.3C1.5,7.3,.9,7.4,.5,7.6C.8,6.8,2.3,6.8,4.7,6.6L4.7,5.3L2.3,5.3C1.7,5.4,1.7,4.7,1.7,4C1.7,3.3,1.7,2.6,1.7,1.9L4.7,2.3L1.8,1.5C1.4,1.5,1,1.5,.7,1.6L4.7,1.2C4.7,.9,4.7,.5,4.7,0L5.7,.5L8.2,1.2L9.8,1.5L5.3,1.5L7.7,2.3L8.4,2.8zM2.3,2.6L2.3,3.7L4.7,3.7L4.7,2.6L2.3,2.6zM5.3,2.6L5.3,3.7L7.8,3.7L7.8,2.6L5.3,2.6zM2.3,4L2.3,5.1L4.7,5.1L4.7,4L2.3,4zM5.3,4L5.3,5.1L7.8,5.1L7.8,4L5.3,4zM1,8C1.2,8.7,1.2,9.1,1.1,9.4C1,9.7,.9,10,.7,10.1C.5,10.2,.3,10.2,0,10.1C0,9.9,0,9.7,.3,9.4C.6,9.1,.8,8.6,1,8zM2.5,9.7C2.5,8.8,2.5,8.1,2.5,7.6L3.5,8.1L3.1,9.5C3.1,9.8,3.2,10,3.5,9.9L6.4,9.9C6.7,10,6.9,9.8,7,9.4C7,9,7.1,8.6,7.1,8.1C7.3,8.6,7.3,8.9,7.4,9.1C7.4,9.4,7.6,9.5,7.9,9.7C7.7,10.2,7.2,10.5,6.4,10.5L3.2,10.5C2.7,10.5,2.4,10.3,2.5,9.7zM4.2,7.3C4.9,7.6,5.4,7.9,5.6,8.1C5.8,8.4,5.8,8.6,5.6,8.9C5.4,9.1,5.2,9.1,5.1,8.7C4.9,8.3,4.6,7.8,4.2,7.3zM7.9,7.7C8.9,8.2,9.4,8.6,9.6,8.8C9.8,9,9.8,9.3,9.7,9.6C9.5,9.9,9.3,9.9,9.1,9.5C8.9,9.1,8.5,8.5,7.9,7.7zM13.1,3.6C13.1,4.4,13.1,5,13.1,5.3C13,5.7,12.9,5.9,12.6,6C12.4,6.1,12.2,6.1,12,6.1C11.8,6,11.9,5.8,12.2,5.3C12.5,4.9,12.7,4.3,13.1,3.6zM14.1,.4L15.1,.9C14.7,5,14.5,7.4,13.9,8.5C13.3,9.6,12.5,10.5,11.6,11C12.9,9.6,13.7,7.8,13.9,5.7C14.1,3.6,14.1,1.8,14.1,.4zM15.4,3.6C16,4.1,16.4,4.6,16.5,4.9C16.6,5.1,16.6,5.4,16.5,5.7C16.3,5.9,16.2,6,16.1,6C16,6,15.9,5.8,15.8,5.3C15.8,4.9,15.6,4.4,15.4,3.6zM17.3,9.7C17.3,8.7,17.4,7.8,17.4,7.1C17.4,3.5,17.3,1.5,17.3,.8L18.3,1.3L18,7.5C18,8.1,18,8.7,17.3,9.7zM18.7,3.6C19.4,4.2,19.7,4.6,19.8,4.8C19.9,5,19.9,5.2,19.8,5.4C19.7,5.6,19.6,5.7,19.5,5.8C19.3,5.9,19.2,5.8,19.1,5.3C19,4.8,18.9,4.3,18.7,3.6zM21.2,1.1L21.2,8.6C21.2,9.1,21.2,9.8,21.3,10.5C20.6,9.7,20.6,8.8,20.6,8C20.6,3.2,20.6,.5,20.6,.1L21.2,1.1zM27.9,0C28.6,.3,29,.5,29.2,.8C29.5,1,29.5,1.2,29.4,1.5C29.3,1.7,29.2,1.9,29,1.9C28.9,1.9,28.8,1.8,28.7,1.4C28.6,1.1,28.3,.6,27.9,0zM25.3,9.8C25.4,8.6,25.4,7.4,25.4,6.3C25.4,5.2,25.4,4.2,25.3,3.5L28.6,3.9L28.6,2.3L25.3,2.3C24.9,2.3,24.6,2.3,24.2,2.4L32.5,2L34.3,2.3L29.3,2.3L29.3,3.9L31.9,3.9L33.1,4L32.6,8.5C32.6,9.1,32.3,9.5,31.6,9.8C31.6,9.3,31.1,9,30.3,8.7C30.8,8.6,31.2,8.6,31.5,8.6C31.9,8.6,32,8.4,32,8.1L32,4.2L29.3,4.2L29.3,9C29.3,9.5,29.3,10.1,29.3,10.6C28.6,10.2,28.6,9.4,28.6,8.7L28.6,4.2L26,4.2L25.3,9.8z" stroke="#000000" id="shape4" fill="#000000" transform="translate(658.99,565.51)" />
          <!--广州-->
          <path d="M1.3,1.5L9,2L10.6,2.3L2,2.3C2,4.8,2,6.6,1.7,7.6C1.5,8.7,.9,9.8,0,11C.8,9.3,1.3,7.5,1.3,5.4C1.4,3.3,1.3,2,1.3,1.5zM5,0C5.7,.4,6.1,.7,6.2,.8C6.4,1,6.4,1.2,6.3,1.4C6.2,1.6,6.1,1.7,6,1.8C5.8,1.9,5.7,1.8,5.6,1.4C5.5,1.1,5.3,.6,5,0zM13.5,3.7C13.5,4.5,13.5,5.1,13.5,5.4C13.4,5.8,13.3,6,13,6.1C12.8,6.2,12.6,6.2,12.4,6.2C12.2,6.1,12.3,5.8,12.6,5.4C12.9,5,13.1,4.4,13.5,3.7zM14.5,.5L15.5,1C15.1,5,14.9,7.5,14.3,8.6C13.7,9.7,12.9,10.5,12,11.1C13.3,9.7,14.1,7.9,14.3,5.8C14.5,3.7,14.5,1.9,14.5,.5zM15.8,3.7C16.4,4.2,16.8,4.6,16.9,4.9C17,5.2,17,5.5,16.9,5.8C16.7,6,16.6,6.1,16.5,6.1C16.4,6.1,16.3,5.8,16.2,5.4C16.2,5,16,4.5,15.8,3.7zM17.7,9.8C17.8,8.8,17.8,7.9,17.8,7.2C17.8,3.6,17.8,1.5,17.7,.9L18.8,1.4L18.4,7.6C18.4,8.2,18.4,8.8,17.7,9.8zM19.1,3.7C19.8,4.3,20.1,4.7,20.2,4.9C20.3,5.1,20.3,5.3,20.2,5.5C20.1,5.7,20,5.8,19.9,5.9C19.7,6,19.6,5.9,19.5,5.4C19.4,4.9,19.3,4.4,19.1,3.7zM21.6,1.2L21.6,8.7C21.6,9.2,21.6,9.9,21.7,10.6C21,9.8,21,8.9,21,8.1C21,3.3,21,.6,21,.2L21.6,1.2zM28.3,.2C29,.4,29.4,.6,29.6,.9C29.9,1.1,29.9,1.3,29.8,1.6C29.7,1.8,29.6,1.9,29.4,2C29.3,2,29.2,1.9,29.1,1.5C29,1.2,28.7,.7,28.3,.2zM25.7,9.9C25.8,8.7,25.8,7.5,25.8,6.4C25.8,5.3,25.8,4.3,25.7,3.6L29,4L29,2.4L25.7,2.4C25.3,2.4,25,2.4,24.6,2.5L32.9,2.1L34.7,2.4L29.7,2.4L29.7,4L32.3,4L33.5,4.1L33,8.6C33,9.2,32.7,9.6,32,9.8C32,9.4,31.5,9.1,30.7,8.8C31.2,8.7,31.6,8.7,31.9,8.7C32.3,8.7,32.4,8.5,32.4,8.2L32.4,4.3L29.7,4.3L29.7,9C29.7,9.6,29.7,10.2,29.7,10.7C29,10.3,29,9.5,29,8.8L29,4.3L26.4,4.3L25.7,9.9z" stroke="#000000" id="shape7" fill="#000000" transform="translate(552.64,545.74)" />
          <!--东莞-->
          <path d="M3.1,9.8C3.9,9.9,4.4,9.9,4.6,9.9C4.9,9.9,5,9.8,5,9.6L5,5.7L2.2,5.7L1.1,5.5C1.4,5.3,1.7,5,2.1,4.6C2.4,4.1,2.9,3.3,3.5,2.3L1.6,2.3C1.2,2.3,.9,2.3,.5,2.4L3.6,2C4.1,1,4.3,.3,4.4,0C5,.8,4.7,1.2,4.4,2L8.3,2L9.9,2.3L4.3,2.3C3.6,3.5,2.9,4.6,2.3,5.4L5,5.4C5,4.5,5,3.8,5,3.3L6,3.8L5.7,5.4L7.8,5.4L9.3,5.7L5.7,5.7L5.7,9.8C5.7,10.4,5.4,10.8,4.6,11.1C4.6,10.7,4.1,10.3,3.1,9.8zM3.2,6.2C3.9,7,3.4,7.4,2.7,8C2,8.7,1.1,9.4,0,10.1C1.4,8.8,2.5,7.6,3.2,6.2zM6.7,6.5C8.4,7.5,9.5,8.3,9.7,8.6C10,9,10,9.4,9.8,9.7C9.7,10,9.4,9.9,9,9.3C8.7,8.6,7.9,7.7,6.7,6.5zM13.3,3.2L16.9,3.7C16.9,3.2,16.7,2.8,16.3,2.3C17,2.5,17.4,2.7,17.6,3C17.7,3.2,17.6,3.4,17.3,3.7L20.7,3.7L22,4C21.5,4.1,21,4.4,20.4,5.2L20.8,4L13.3,4C13.4,4.5,13.4,4.8,13.2,4.9C13,5.1,12.8,5.2,12.5,5.2C12.2,5.1,12.1,5,12.3,4.8C12.5,4.6,12.6,4.4,12.8,4.2C12.9,4,13,3.6,13.3,3.2zM13.9,5.2L18.6,5.2L20.1,5.5L15.4,5.5C15,5.5,14.6,5.5,13.9,5.2zM12,6.8L20.3,6.8L22,7.1L18.5,7.1L18.5,9.5C18.5,9.9,18.7,10.1,19.3,10.1L20.9,10.1C21.2,10.1,21.4,9.9,21.4,9.6C21.5,9.2,21.6,8.8,21.6,8.2C21.8,8.8,21.8,9.2,21.8,9.5C21.9,9.8,22,9.9,22.3,10C22.1,10.4,21.8,10.6,21.3,10.6L18.8,10.6C18.1,10.6,17.8,10.3,17.9,9.6L17.9,7.1L16.1,7.1C16,8.4,15.6,9.3,14.9,9.8C14.1,10.4,13.1,10.8,11.9,11C13,10.4,13.9,10,14.4,9.4C15,8.9,15.3,8.1,15.4,7.1L13.5,7.1C13.1,7.1,12.7,7.1,12,6.8zM15,3C15,2.6,15,2.2,15,1.9L13.5,1.9C13.1,1.9,12.7,1.9,12.4,2L15,1.6C15,1,15,.5,15,0L16.1,.6L15.7,1.6L18.5,1.6C18.5,1.1,18.5,.6,18.4,0L19.5,.5L19.1,1.6L20.5,1.6L22.2,1.9L19.1,1.9C19.1,2.2,19.1,2.4,19.2,2.6L15.7,1.9L15,3zM27.9,.2C28.7,.4,29.1,.6,29.3,.9C29.5,1.1,29.5,1.3,29.4,1.6C29.3,1.8,29.2,1.9,29,2C28.9,2,28.8,1.9,28.7,1.5C28.6,1.2,28.3,.7,27.9,.2zM25.4,9.9C25.4,8.7,25.4,7.5,25.4,6.4C25.4,5.3,25.4,4.3,25.4,3.6L28.6,4L28.6,2.4L25.4,2.4C25,2.4,24.6,2.4,24.2,2.5L32.5,2.1L34.3,2.4L29.3,2.4L29.3,4L31.9,4L33.1,4.1L32.7,8.6C32.7,9.2,32.3,9.6,31.6,9.8C31.6,9.4,31.2,9.1,30.3,8.8C30.8,8.7,31.2,8.7,31.6,8.7C31.9,8.7,32,8.5,32,8.2L32,4.3L29.3,4.3L29.3,9C29.3,9.6,29.3,10.2,29.3,10.7C28.6,10.3,28.6,9.5,28.6,8.8L28.6,4.3L26.1,4.3L25.4,9.9z" stroke="#000000" id="shape8" fill="#000000" transform="translate(583.32,602.77)" />
          <!--深圳-->
          <path d="M4.5,.5L9.4,1.1L10.5,1.4C10.2,1.4,9.7,1.8,9.1,2.5L9.4,1.4L4.6,1.4C4.6,1.8,4.6,2,4.5,2.2C4.4,2.3,4.3,2.4,4.2,2.5C4,2.5,3.9,2.5,3.8,2.4C3.6,2.4,3.7,2.2,3.8,2C4,1.8,4.2,1.3,4.5,.5zM5.5,2C6,2.8,5.6,3.1,5.2,3.5C4.8,3.9,4.3,4.3,3.8,4.7C4.6,3.6,5.2,2.8,5.5,2zM7.6,2.2C8.7,2.6,9.4,2.9,9.6,3.2C9.8,3.4,9.9,3.7,9.7,4.1C9.6,4.4,9.4,4.4,9.1,3.9C8.9,3.5,8.3,2.9,7.6,2.2zM7.3,5.7L7.3,8.8C7.3,9.3,7.3,9.8,7.4,10.4C6.6,10.1,6.7,8.5,6.7,6C5.6,7.9,4.3,9.2,2.6,9.8C4,8.8,5.1,7.5,6,5.7C4.7,5.7,4.3,5.8,4,5.9L6.7,5.4C6.7,4.6,6.6,3.9,6.6,3.4L7.7,3.9L7.3,5.4L9.4,5.4L10.8,5.7L7.6,5.7C8.6,7.5,9.6,8.5,10.8,9C10.4,9.1,10,9.3,9.8,9.6C8.7,8.6,7.9,7.3,7.3,5.7zM3.4,2C2.5,5.2,2,7,1.9,7.5C1.8,7.9,1.8,8.4,1.8,9C1.8,9.6,1.8,10,1.8,10.2C1.8,10.4,1.6,10.4,1.2,10.3C.9,10.2,.8,9.8,1,9.2C1.2,8.5,1.2,8.1,1,7.9C.8,7.8,.5,7.6,0,7.5C.6,7.4,.9,7.4,1,7.4C1.1,7.4,1.3,7.2,1.4,7C1.6,6.7,2.2,5,3.4,2zM0,3C1.1,3.5,1.6,4,1.6,4.3C1.6,4.6,1.5,4.8,1.4,4.9C1.2,5.1,1.1,5,.9,4.6C.8,4.2,.5,3.7,0,3zM1.1,.3C2,.8,2.5,1.1,2.6,1.4C2.7,1.6,2.7,1.9,2.5,2.1C2.3,2.4,2.1,2.3,1.9,1.9C1.8,1.5,1.5,1,1.1,.3zM14.2,10.6C15.1,10,15.8,9.3,16.2,8.5C16.7,7.7,16.9,6.5,16.9,4.7C16.9,2.9,16.9,1.4,16.9,.2L18,.7C17.6,4.5,17.5,6.6,17.3,7.4C17.2,8.1,16.8,8.8,16.2,9.4C15.7,9.9,15,10.4,14.2,10.6zM19.9,7.3C19.9,7.7,19.9,8.4,20,9.4C19.3,9.2,19.3,8.4,19.3,7.4L19.3,2.4C19.3,2,19.3,1.5,19.2,1L20.3,1.5L19.9,7.3zM22.3,8.8C22.3,9.2,22.3,9.7,22.3,10.4C21.6,10,21.6,9.3,21.6,8.9L21.6,1.6C21.6,1.3,21.6,.8,21.6,0L22.6,.6L22.3,8.8zM13.9,1.7C13.9,1.3,13.9,.8,13.9,.1L15,.6L14.6,3.5L15.9,3L14.6,3.8L14.6,7.5L16.5,7C14.2,8.1,12.9,8.8,12.6,9.2C12.7,8.1,13.3,7.9,13.9,7.7L13.9,3.8C13.1,3.8,12.8,3.8,12.4,3.9L13.9,3.5L13.9,1.7zM28.4,0C29.1,.2,29.5,.4,29.7,.7C29.9,.9,30,1.1,29.9,1.4C29.8,1.6,29.6,1.8,29.5,1.8C29.4,1.9,29.3,1.7,29.2,1.3C29.1,1,28.8,.5,28.4,0zM25.8,9.7C25.9,8.5,25.9,7.4,25.9,6.2C25.9,5.1,25.9,4.1,25.8,3.4L29.1,3.8L29.1,2.2L25.8,2.2C25.4,2.2,25,2.3,24.7,2.3L33,1.9L34.8,2.2L29.8,2.2L29.8,3.8L32.4,3.8L33.6,3.9L33.1,8.4C33.1,9,32.8,9.4,32.1,9.7C32.1,9.2,31.6,8.9,30.8,8.6C31.3,8.5,31.7,8.5,32,8.5C32.4,8.5,32.5,8.3,32.5,8L32.5,4.1L29.8,4.1L29.8,8.9C29.8,9.4,29.8,10,29.8,10.5C29.1,10.1,29.1,9.3,29.1,8.6L29.1,4.1L26.5,4.1L25.8,9.7z" stroke="#000000" id="shape9" fill="#000000" transform="translate(617.92,645.69)" />
          <!--韶关-->
          <path d="M6.6,6.6L6.6,9.7L9.1,9.7L9.1,6.6L6.6,6.6zM5.2,1.2L9.2,1.2L10.4,1.4C9.9,3.2,9.8,4.2,9.7,4.5C9.6,4.8,9.4,5.1,9.3,5.2C9.1,5.4,8.9,5.5,8.5,5.6C8.5,5.2,8.1,4.9,7.5,4.7C8.2,4.6,8.6,4.6,8.8,4.6C8.9,4.6,9,4.5,9.1,4.1C9.2,3.8,9.3,2.9,9.3,1.5L7.4,1.5C7.3,2.6,7.1,3.4,6.8,4.1C6.5,4.7,5.9,5.3,5.1,5.9C5.6,5.2,6,4.5,6.3,3.9C6.6,3.2,6.7,2.4,6.8,1.5C6.3,1.5,6,1.5,5.2,1.2zM5.9,10.9C5.9,10.1,6,9.3,6,8.3C6,7.4,5.9,6.6,5.9,6L9,6.3L10.1,6.4C9.8,8.5,9.8,9.7,9.8,10.5L5.9,10.9zM1.6,8.2L1.6,9.8L3.8,9.8L3.8,8.2L1.6,8.2zM1.8,0C2.3,.3,2.6,.5,2.7,.8C2.9,1,2.8,1.3,2.6,1.5C2.4,1.8,2.3,1.7,2.2,1.4C2.1,1,2,.6,1.8,0zM1.1,2.5C1.5,2.9,1.9,3.2,2,3.5C2.2,3.8,2.1,4,1.9,4.3C1.6,4.6,1.5,4.4,1.4,4C1.3,3.5,1.2,3,1.1,2.5zM0,1.8L3.7,1.8L5,2.1L1.5,2.1C1.1,2.1,.8,2.2,0,1.8zM3.5,2.3C3.6,3.8,3.3,4.3,3,4.7L4.1,4.7L5.4,5L1.3,5C.9,5,.5,5,.2,5.1L2.8,4.7C3.1,3.7,3.4,2.9,3.5,2.3zM4.4,6.5C4.4,8.5,4.4,9.9,4.5,10.6L1.6,10.1C1,10,1,9.2,1,8.3C1,7.4,1,6.5,.9,5.7L3.7,6L4.4,6.5zM1.6,6.3L1.6,7.9L3.8,7.9L3.8,6.3L1.6,6.3zM14.5,.3C15.3,.5,15.8,.8,16.1,1.2C16.5,1.5,16.6,1.9,16.4,2.3C16.1,2.7,15.9,2.6,15.7,2C15.4,1.4,15.1,.8,14.5,.3zM17.6,3.3C17.5,4.1,17.5,4.9,17.4,5.8L21,5.8L22.7,6.1L18,6.1C18.3,6.9,18.8,7.7,19.5,8.4C20.3,9.2,21.3,9.8,22.7,10.1C22.2,10.3,21.8,10.5,21.7,10.9C20.8,10.4,20,9.9,19.3,9.1C18.6,8.4,18.1,7.4,17.8,6.1C17.1,7.2,16.5,8.2,15.6,9.1C14.7,9.9,13.5,10.5,12,11C13.5,10.1,14.6,9.4,15.3,8.6C16,7.7,16.5,6.9,16.7,6.1L13.5,6.1C13,6.1,12.7,6.1,12.3,6.2L16.7,5.8C16.8,5.1,16.8,4.3,16.8,3.3L14.1,3.3C13.7,3.3,13.3,3.3,12.9,3.4L17.8,3C18.1,2.6,18.3,2.1,18.5,1.5C18.7,.9,18.9,.4,19,0L20.1,.8C19,1.8,18.5,2.5,18.1,3L20.6,3L22.2,3.3L17.6,3.3zM28.2,.2C28.9,.4,29.3,.6,29.5,.9C29.7,1.1,29.8,1.3,29.6,1.6C29.5,1.8,29.4,1.9,29.3,2C29.1,2,29,1.9,28.9,1.5C28.8,1.2,28.6,.7,28.2,.2zM25.6,9.9C25.6,8.7,25.6,7.5,25.6,6.4C25.6,5.3,25.6,4.3,25.6,3.6L28.9,4L28.9,2.4L25.6,2.4C25.2,2.4,24.8,2.4,24.5,2.5L32.8,2.1L34.5,2.4L29.5,2.4L29.5,4L32.2,4L33.3,4.1L32.9,8.6C32.9,9.2,32.5,9.6,31.8,9.8C31.8,9.4,31.4,9.1,30.5,8.8C31,8.7,31.5,8.7,31.8,8.7C32.1,8.7,32.3,8.5,32.3,8.2L32.3,4.3L29.5,4.3L29.5,9C29.5,9.6,29.5,10.2,29.6,10.7C28.9,10.3,28.9,9.5,28.9,8.8L28.9,4.3L26.3,4.3L25.6,9.9z" stroke="#000000" id="shape10" fill="#000000" transform="translate(610.48,454.92)" />

          <!--东江-->
          <path stroke="#3498db" d="M161.2,0L157.4,1.3L157.4,3.8L157.4,6.8L155.3,9.8L153.2,11.1L151.9,12.3L148,13.2L145.3,16L143.8,17.4L140.8,20.4L139.5,23L140.8,27.2L143.8,28.9L145.3,31.7L145.3,32.8C145.3,32.8,145.8,33.3,146.5,33.9C147.1,34.6,147.5,35,147.5,35L146.6,37.2L146.5,38.3L146.5,40.4C146.5,40.4,146.5,40.9,146.5,41.7C146.5,42.6,145.3,44.3,145.3,44.3L143.8,45.7L143.8,46.8L140.8,48.7L139.5,51.1L136.9,52.7L134.5,53.7L130.7,57.5L129.4,57.5C129.4,57.5,130.1,57.1,129.4,58.8C128.7,60.5,128.7,60.5,128.7,60.5C128.7,60.5,125.5,61.7,126.3,62.1C127,62.6,126.4,66.3,126.4,66.3L124.6,66.9C124.6,66.9,121.6,68,120.9,68.6C120.3,69.3,120.9,67.3,117.7,70.5C114.5,73.7,115.8,73.7,114.5,73.7C113.2,73.7,113.4,74.7,113.4,74.7C113.4,74.7,113.1,74.3,112.1,74.7C111.2,75.2,107.2,76.6,107.2,76.6C107.2,76.6,108.5,76.6,107.2,76.6C105.9,76.6,104,78.7,101.7,78.7C99.3,78.7,97.4,79.6,97.4,79.6L94.4,79.6C94.4,79.6,93.6,79.1,92.3,80.4C91,81.7,89.8,82.1,89.8,82.1L88.7,84C88.7,84,88,86,87.4,86.6C86.8,87.2,84.2,87.2,84.6,88.1C85.1,88.9,83.8,90.6,83.8,91.5C83.8,92.3,85,91,83.8,93.2C82.6,95.4,80.9,97.1,81.3,96.7L80.9,99.5C80.9,99.5,80.9,100.1,80.9,100.9C80.9,101.6,79.5,103,80,102.6L78.3,105.5C78.3,105.5,79.5,103.9,79.5,105.6C79.5,107.3,80.8,107.4,79.5,108.6C78.3,109.9,80.8,108.7,79.5,110C78.3,111.3,76.3,112.1,76.7,112.9C77,113.6,75.7,116.2,75.7,117.9C75.7,119.6,75.7,120,75.7,119.6L75.7,123.5L76.7,126.4C76.7,126.4,76.7,127,76.7,128.2C76.7,129.4,77,130.4,76.7,131.9C76.3,133.4,75.7,135.1,75.1,134.5C75.1,134.5,74.9,137,73.8,137C72.7,137,72.7,139.1,72.7,139.1C72.7,139.1,71.3,139.5,70.3,140.5C69.2,141.6,68.3,141.5,67.4,142.3C66.5,143.2,67.6,143.8,65.9,143.8C64.2,143.8,59.6,145.2,59.6,145.2L58.4,145.9L56.1,145.2L55.7,147.3L55.7,149.2L55.7,151.9C55.7,151.9,54.8,153.9,55.7,154C56.7,154.1,57,157,57,157C57,157,55.6,158.2,57,158.3C58.4,158.4,59.6,159.7,59.6,159.7L61.4,159.7L62.3,162.3L63.6,164.9L64.6,166L65.9,168.9L65.9,171.1L67.1,172.6L67.4,174L65.9,173.8L63.6,174L61.4,175.6L58.4,176.9L57,178.3L53.7,176.9L52.9,175.6L51.3,174L48,174C48.9,174,49.6,176,48.6,176.9C47.6,177.7,48,180.4,48,180.4C48,180.4,45.9,181.3,46.1,182.3C46.3,183.4,45.1,184.7,45.1,184.7L43.8,184.7L37.9,181.4L35.9,179.4C35.9,179.4,33.6,181.5,33.6,180.4C33.6,179.4,30.3,178.3,30.3,178.3C30.3,178.3,27,179.7,26.6,178.3C26.2,176.9,24.8,178.3,24.8,178.3L22.6,178.3L22.6,179.4L22.6,180.4C22.6,180.4,22.8,182.3,20.7,182.3C18.6,182.3,17.8,181.4,16.9,182.3C16,183.2,17.4,181.8,16,183.2C14.5,184.7,14.3,184.9,13.4,185.8C12.6,186.6,10.9,188.3,8.9,190.3C7,192.2,8.2,188.2,5.8,193.4C3.3,198.7,3.7,197.3,3.3,198.7C3,200,4.1,199,1.9,201.1C-0.2,203.2,1.5,202.3,.3,204.6C-0.9,206.8,1.9,208.9,1.9,208.9C1.9,208.9,.5,210.6,1.9,210.6C3.3,210.7,3.3,212.3,3.3,213.2C3.3,214,3.3,217.7,3.3,217.7C4.3,218.7,5.8,219.1,5.8,220.2C5.8,221.3,6.4,225.1,5.8,224.8C5.8,224.8,6.4,225.6,6.4,227.2C6.4,228.9,5.8,231.9,5.8,231.9" id="shape18" fill="none" transform="translate(633.64,402.64)" />

          <g id="0F8957D5AA5A4BA0A6E05638C64BE387" transform="translate(706.48,503)">
            <path class="point" d="M0,2.8C0,1.3,1.3,0,2.8,0C4.4,0,5.7,1.3,5.7,2.8C5.7,4.4,4.4,5.7,2.8,5.7C1.3,5.7,0,4.4,0,2.8z" stroke="#000000" fill="#ffffff" />
            <text class="st1">
              <tspan y="5" x="8.5">广东粤电新丰江发电有限责任公司</tspan>
            </text>
          </g>
          <g id="80DC6D65962B495DB25DF6BCFC77322D" transform="translate(703.48,521.18)">
            <path class="point" d="M0,2.8C0,1.3,1.3,0,2.8,0C4.4,0,5.7,1.3,5.7,2.8C5.7,4.4,4.4,5.7,2.8,5.7C1.3,5.7,0,4.4,0,2.8z" stroke="#000000" fill="#ffffff" />
            <text class="st1">
              <tspan y="5.8" x="10">深能合和电力(河源)有限公司</tspan>
            </text>
          </g>
          <g id="094E95F594AD423DAEAF4D3B2A317800" transform="translate(676.48,571.17)">
            <path class="point" d="M0,2.8C0,1.3,1.3,0,2.8,0C4.4,0,5.7,1.3,5.7,2.8C5.7,4.4,4.4,5.7,2.8,5.7C1.3,5.7,0,4.4,0,2.8z" stroke="#000000" fill="#ffffff" />
            <text class="st1">
              <tspan y="4.8" x="11.2">虾村取水口</tspan>
            </text>
          </g>
          <g id="E51D2CF9CF7A4AFF9E37C6D27473D502" transform="translate(676.48,584.33)">
            <path class="point" d="M0,2.8C0,1.3,1.3,0,2.8,0C4.4,0,5.7,1.3,5.7,2.8C5.7,4.4,4.4,5.7,2.8,5.7C1.3,5.7,0,4.4,0,2.8z" stroke="#000000" fill="#ffffff" />
            <text class="st1">
              <tspan y="4.8" x="10">谭屋角取水口</tspan>
            </text>
          </g>
          <g id="5A3BB34A480B450DAE9877676AAB47E6" transform="translate(656.01,534.17)">
            <path class="point" d="M0,2.8C0,1.3,1.3,0,2.8,0C4.4,0,5.7,1.3,5.7,2.8C5.7,4.4,4.4,5.7,2.8,5.7C1.3,5.7,0,4.4,0,2.8z" stroke="#000000" fill="#ffffff" />
            <text class="st1">
              <tspan y="4.8" x="10">龙门县永富自来水有限公司取水口</tspan>
            </text>
          </g>
          <g id="20813B7DD6DD4D58815F9EDC3F04986F" transform="translate(631.8,633.16)">
            <path class="point" d="M0,2.8C0,1.3,1.3,0,2.8,0C4.4,0,5.7,1.3,5.7,2.8C5.7,4.4,4.4,5.7,2.8,5.7C1.3,5.7,0,4.4,0,2.8z" stroke="#000000" fill="#ffffff" />
            <text class="st1">
              <tspan y="3.8" x="10.2">深圳东江水源工程取水口</tspan>
            </text>
          </g>
          <g id="B203887B73AC482898A4E141987FD2EE" transform="translate(602.81,606.33)">
            <path class="point" d="M0,2.8C0,1.3,1.3,0,2.8,0C4.4,0,5.7,1.3,5.7,2.8C5.7,4.4,4.4,5.7,2.8,5.7C1.3,5.7,0,4.4,0,2.8z" stroke="#000000" fill="#ffffff" />
            <text class="st1">
              <tspan y="4.7" x="8.2">东莞东江水务取水口</tspan>
            </text>
          </g>

          <g id="FC2749A9E3D94BFBA6C9995CC2C28F15" transform="translate(642.81,656.33)">
            <path class="point" d="M0,2.8C0,1.3,1.3,0,2.8,0C4.4,0,5.7,1.3,5.7,2.8C5.7,4.4,4.4,5.7,2.8,5.7C1.3,5.7,0,4.4,0,2.8z" stroke="#000000" fill="#ffffff" />
            <text class="st1">
              <tspan y="4.7" x="8.2">广东粤港供水有限公司</tspan>
            </text>
          </g>

        </g>
      </svg>
    </div>
  </div>
</template>

<script>
import { getMapList } from "@/commons/api/eneralize";

import { notify } from "@/commons/utils/notify";
import { mapRules } from "@/commons/utils/validate";

import { format } from "@/commons/utils";

export default {
  name: "intake",
  data() {
    return {
      //=====筛选条件相关=====
      intakeType: "",
      //取水类型类型备选值
      intakeTypeOptions: [
        {
          id: 1,
          value: "月度取水"
        },
        {
          id: 2,
          value: "季度取水"
        },
        {
          id: 3,
          value: "年度取水"
        }
      ],
      //季度
      quarter: "",
      quarterOptions: [
        {
          id: 1,
          value: "第一季度"
        },
        {
          id: 2,
          value: "第二季度"
        },
        {
          id: 3,
          value: "第三季度"
        },
        {
          id: 4,
          value: "第四季度"
        }
      ],

      //账号状态
      userStatusOptions: {},
      //筛选条件
      listQuery: {
        //times: [" "]
      },

      listQuery0: {},

      //数据加载标识
      listLoading: true,

      rules: mapRules
    };
  },

  // 周期函数，创建时获取表格数据和参数备选值
  created() {
    this.getList(); //获取表数据
  },

  mounted() {
    var wrap = SVG.get("shapeWrap");
    wrap.on(
      "click",
      function(e) {
        var target = e.target;
        var targetParent = target.parentNode;
        var className = target.getAttribute("class");
        var targetParentClassName = targetParent.getAttribute("class");

        var targetChild = target.childNodes ? target.childNodes[0] : null;
        var targetChildClassName;
        if (targetChild) {
          targetChildClassName = targetChild.getAttribute("class");
        }

        if (
          className == "point" ||
          className == "tooltip" ||
          className == "tooltipTxt" ||
          targetParentClassName == "tooltipTxt" ||
          targetChildClassName == "point"
        ) {
          return;
        }
        SVG.select("rect.tooltip").hide();
        SVG.select("text.tooltipTxt").hide();
        SVG.select("path.point").attr({
          fill: "#fff"
        });
      },
      true
    );
  },

  methods: {
    //=====筛选条件相关=====

    //数据管理
    handleDataManage() {
      this.$router.push({
        path: `/eneralize/intake/intakeData`
      });
    },

    //重置按钮操作
    handleReset() {
      this.listQuery = {};
      this.listQuery0 = {};
    },

    //搜索按钮操作
    handleFilter() {
      this.listQuery0 = {};
      if (this.intakeType === 1) {
        this.listQuery0.months = [this.listQuery.month];
      } else if (this.intakeType === 2) {
        var year = this.listQuery.year;
        if (year) {
          // 兼容IE,只截取到年月日
          year = year.split(" ")[0];
          year = new Date(year).getFullYear();
        }
        this.listQuery0.months = [];

        var months = this.listQuery0.months;
        if (this.quarter === 1) {
          months.push(this.formatMonth(year + "-" + "01"));
          months.push(this.formatMonth(year + "-" + "02"));
          months.push(this.formatMonth(year + "-" + "03"));
        } else if (this.quarter === 2) {
          months.push(this.formatMonth(year + "-" + "04"));
          months.push(this.formatMonth(year + "-" + "05"));
          months.push(this.formatMonth(year + "-" + "06"));
        } else if (this.quarter === 3) {
          months.push(this.formatMonth(year + "-" + "07"));
          months.push(this.formatMonth(year + "-" + "08"));
          months.push(this.formatMonth(year + "-" + "09"));
        } else if (this.quarter === 4) {
          months.push(this.formatMonth(year + "-" + "10"));
          months.push(this.formatMonth(year + "-" + "11"));
          months.push(this.formatMonth(year + "-" + "12"));
        }

        if (months.length === 0) {
          delete this.listQuery0.months;
          var year = this.listQuery.year;
          if (year) {
            this.listQuery0.year = year;
          }
        }
      } else if (this.intakeType === 3) {
        var year = this.listQuery.year;
        if (year) {
          this.listQuery0.year = year;
        }
      }

      this.getList(); //刷新表格数据
    },

    formatMonth(str) {
      var date = new Date(str);
      var res = format(date, "yyyy-MM-dd hh:mm:ss");
      return res;
    },

    //=====表格数据相关=====

    //获取表数据
    getList() {
      this.listLoading = true; //显示加载标识
      var that = this;
      getMapList(this.listQuery0).then(response => {
        //通知
        var res = notify(this, response, true);
        if (res) {
          that.list = response.data;

          var svgConf = {
            tooltip: {
              width: 100,
              height: 50
            },
            point: {
              active: "#f00"
            }
          };

          //获取标注点的父元素
          var shapeWrap = SVG.get("shapeWrap").node;
          shapeWrap.getElementsByTagName("tspan");
          var items = response.data;

          SVG.select("rect").hide();

          SVG.select("path.point").attr({
            fill: "#fff"
          });

          SVG.select("text.tooltipTxt")
            .hide()
            .removeClass("tooltipTxt");

          for (var i = 0; i < items.length; i++) {
            var item = items[i];
            var orgId = item.id;
            var orgName = item.name;
            var intake = item.intake ? item.intake : 0;
            var license = item.license ? item.license : 0;
            var pay = item.pay ? item.pay : 0;
            var plan = item.plan ? item.plan : 0;

            //获取取水单位
            var org = document.getElementById(orgId);

            if (!org) {
              continue;
            }

            var nested = SVG.get(orgId)
              .nested()
              .addClass("tooltip-wrap");

            //添加提示框
            nested
              .rect(svgConf.tooltip.width, svgConf.tooltip.height)
              .radius(5)
              .attr({
                fill: "#fff",
                stroke: "#000",
                strokeWidth: 0.5,
                transform: "matrix(1,0,0,1,-50,-60)",
                class: "tooltip"
              })
              .hide();

            //添加提示框文本
            nested
              .text(function(add) {
                add
                  .tspan("许可证取水量：" + license + "m³")
                  .font("weight", "bold")
                  .newLine();
                add
                  .tspan("计划取水量：" + plan + "m³")
                  .font("weight", "bold")
                  .newLine();
                add
                  .tspan("实际取水量：" + intake + "m³")
                  .font("weight", "bold")
                  .newLine();
                add
                  .tspan("月缴费金额：" + pay + "元")
                  .font("weight", "bold")
                  .newLine();
              })
              .font({
                size: 7
              })
              .attr({
                transform: "matrix(1,0,0,1,-45,-55)",
                class: "tooltipTxt"
              })
              .hide();

            //获取单位图标
            var icon = org.getElementsByTagName("path")[0];

            //添加点击事件，弹窗显示
            icon.addEventListener(
              "click",
              function(e) {
                SVG.select("rect.tooltip").hide();
                SVG.select("text.tooltipTxt").hide();

                SVG.select("path.point").attr({
                  fill: "#fff"
                });

                var target = e.target;
                target.setAttribute("fill", svgConf.point.active);

                var tempId = target.parentNode.getAttribute("id");
                var shapeWrap = SVG.get("shapeWrap");
                SVG.get(tempId).addTo(shapeWrap);
                var tooltip = target.parentNode.getElementsByTagName("rect")[0];
                tooltip.style.display = "block";

                // IE不支持getElementsByClass替代方案
                var getElementsByClass = function(searchClass, node, tag) {
                  var classElements = new Array();
                  if (node == null) node = document;
                  if (tag == null) tag = "*";
                  var els = node.getElementsByTagName(tag);
                  var elsLen = els.length;
                  var pattern = new RegExp("(^|\\s)" + searchClass + "(\\s|$)");
                  for (var i = 0, j = 0; i < elsLen; i++) {
                    if (
                      // pattern.test(els[i].className) ||
                      pattern.test(els[i].className.baseVal)
                    ) {
                      classElements[j] = els[i];
                      j++;
                    }
                  }
                  return classElements;
                };

                var tooltipTxt = getElementsByClass(
                  "tooltipTxt",
                  target.parentNode,
                  "text"
                )[0];

                // 非IE支持
                // var tooltipTxt = target.parentNode.getElementsByClassName(
                //   "tooltipTxt"
                // )[0];
                tooltipTxt.style.display = "block";
              },
              true
            );

            //设置取水单位名称
            var txt = org.getElementsByTagName("tspan")[0];
            txt.textContent = orgName;
            if (i == items.length - 1) {
              SVG.get(orgId)
                .select("rect.tooltip")
                .show();
              SVG.get(orgId)
                .select("text.tooltipTxt")
                .show();
              SVG.get(orgId)
                .select("path.point")
                .attr({
                  fill: svgConf.point.active
                });

              // 修复遮挡问题
              var shapeWrap = SVG.get("shapeWrap");
              SVG.get(orgId).addTo(shapeWrap);
            }
          }
        }
        this.listLoading = false;
      });
    }
  }
};
</script>

<style rel="stylesheet/scss" lang="scss">
//筛选面板
.filter-container {
  margin-top: 20px;
  text-align: left;
}
.st1 {
  font-family: Arial;
  font-size: 5pt;
}
</style>